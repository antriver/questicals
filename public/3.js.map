{"version":3,"file":"3.js","sources":["webpack:///RegisterForm.vue","webpack:///PlayerView.vue","webpack:///./src/frontend/js/components/RegisterForm.vue?0f1d","webpack:///./src/frontend/js/views/PlayerView.vue?e26f","webpack:///./src/frontend/js/components/RegisterForm.vue?a2ce","webpack:///./src/frontend/js/views/PlayerView.vue?903c","webpack:///./src/frontend/js/components/RegisterForm.vue?0fbe","webpack:///./src/frontend/js/views/PlayerView.vue?2951","webpack:///./src/classes/Player.js","webpack:///./src/frontend/js/components/RegisterForm.vue","webpack:///./src/frontend/js/components/RegisterForm.vue?3891","webpack:///./src/frontend/js/components/RegisterForm.vue?e115","webpack:///./src/frontend/js/components/RegisterForm.vue?fa70","webpack:///./src/frontend/js/views/PlayerView.vue","webpack:///./src/frontend/js/views/PlayerView.vue?91ce","webpack:///./src/frontend/js/views/PlayerView.vue?5617","webpack:///./src/frontend/js/views/PlayerView.vue?79c9"],"sourcesContent":["<template>\n    <form class=\"register-form\"\n          @submit.prevent=\"register\">\n        <h1>Welcome!</h1>\n        <input v-model=\"player.name\"\n               type=\"text\"\n               class=\"input form-control text-center input-lg\"\n               placeholder=\"What's your name?\" />\n        <button type=\"submit\"\n                class=\"btn btn-primary btn-lg\">\n            Let's Play\n        </button>\n    </form>\n</template>\n\n<script>\nimport Player from '@/classes/Player';\n\nconst { generateId } = require('@/funcs');\n\nconsole.log('player', new Player());\n\nexport default {\n    name: 'RegisterForm',\n\n    data() {\n        return {\n            player: new Player()\n        };\n    },\n\n    mounted() {\n        this.player.id = window.localStorage.getItem('quiz-player-id');\n        if (!this.player.id) {\n            this.player.id = generateId();\n        }\n\n        this.player.name = window.localStorage.getItem('quiz-player-name') || '';\n    },\n\n    methods: {\n        register() {\n            if (!this.player.name) {\n                window.alert('Please enter a name.');\n                return;\n            }\n\n            window.localStorage.setItem('quiz-player-id', this.player.id);\n            window.localStorage.setItem('quiz-player-name', this.player.name);\n\n            this.$root.$options.socket.emit(\n                'registerPlayer',\n                this.player,\n                () => {\n                    this.$emit('registered', this.player);\n                }\n            );\n        }\n    }\n};\n</script>\n\n<style lang=\"less\">\n.register-form {\n    width: 80%;\n    max-width: 400px;\n    text-align: center;\n    padding-bottom: 60px;\n\n    .form-control {\n        margin: 20px 0;\n    }\n}\n</style>\n","<template>\n    <div id=\"player\">\n        <img v-if=\"!isRegisteredPlayer || !(currentQuestion && !currentQuestion.ended)\"\n             id=\"corner-img\"\n             src=\"/assets/img/question.png\" />\n\n        <template v-if=\"!isRegisteredPlayer\">\n            <RegisterForm @registered=\"registered\" />\n        </template>\n        <template v-else>\n            <AnswerInput v-if=\"currentQuestion && !currentQuestion.ended\"\n                         :questionType=\"currentQuestion.type\"\n                         :active=\"currentQuestion.started\"\n                         :title=\"title\"\n                         :existing-choice=\"answer ? answer.answer : null\"\n                         @choice=\"answerChosen\"></AnswerInput>\n            <div v-else>\n                Wait for the host to send you a question...\n            </div>\n        </template>\n    </div>\n</template>\n\n<script>\nimport AnswerInput from '../components/AnswerInput';\nimport RegisterForm from '../components/RegisterForm';\nimport { mapState } from 'vuex';\n\nexport default {\n    name: 'PlayerView',\n\n    components: {\n        AnswerInput,\n        RegisterForm\n    },\n\n    computed: {\n        ...mapState(['player', 'room']),\n\n        isRegisteredPlayer() {\n            return this.player && this.room && this.room.players[this.player.id];\n        },\n\n        currentQuestion() {\n            return this.room.currentQuestion;\n        },\n\n        title() {\n            if (!this.currentQuestion.started) {\n                return 'Get ready to answer...';\n            }\n\n            if (this.answer) {\n                return 'You have answered.';\n            }\n\n            return 'Select your answer...';\n        },\n\n        answer() {\n            if (this.room && this.room.currentQuestion) {\n                return this.room.currentQuestion.answers[this.player.id] || null;\n            }\n\n            return null;\n        }\n    },\n\n    created() {\n        this.$root.$options.socket.on('roomUpdated', () => {\n            setTimeout(() => {\n                this.$root.$options.socket.emit(\n                    'reRegisterPlayer',\n                    this.player\n                );\n            }, 500);\n        });\n\n        this.$root.$options.socket.on('connect', () => {\n            if (this.player) {\n                this.$root.$options.socket.emit(\n                    'registerPlayer',\n                    this.player\n                );\n            }\n        });\n    },\n\n    methods: {\n        /**\n         * @param {Player} player\n         */\n        registered(player) {\n            console.log('Player registered', player);\n            this.$store.commit('setPlayer', player);\n        },\n\n        /**\n         * @param {string} answer\n         */\n        answerChosen(answer) {\n            console.log('answerChosen', answer);\n            this.$root.$options.socket.emit('questionAnswered', { answer, questionId: this.currentQuestion.id });\n        }\n    }\n};\n</script>\n\n<style lang=\"less\">\n#corner-img {\n    position: absolute;\n    bottom: 12px;\n    right: 12px;\n    width: 150px;\n    z-index: -1;\n}\n</style>\n","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".register-form {\\n  width: 80%;\\n  max-width: 400px;\\n  text-align: center;\\n  padding-bottom: 60px;\\n}\\n.register-form .form-control {\\n  margin: 20px 0;\\n}\\n\", \"\"]);\n// Exports\nmodule.exports = exports;\n","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"#corner-img {\\n  position: absolute;\\n  bottom: 12px;\\n  right: 12px;\\n  width: 150px;\\n  z-index: -1;\\n}\\n\", \"\"]);\n// Exports\nmodule.exports = exports;\n","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"form\",\n    {\n      staticClass: \"register-form\",\n      on: {\n        submit: function($event) {\n          $event.preventDefault()\n          return _vm.register($event)\n        }\n      }\n    },\n    [\n      _c(\"h1\", [_vm._v(\"Welcome!\")]),\n      _vm._v(\" \"),\n      _c(\"input\", {\n        directives: [\n          {\n            name: \"model\",\n            rawName: \"v-model\",\n            value: _vm.player.name,\n            expression: \"player.name\"\n          }\n        ],\n        staticClass: \"input form-control text-center input-lg\",\n        attrs: { type: \"text\", placeholder: \"What's your name?\" },\n        domProps: { value: _vm.player.name },\n        on: {\n          input: function($event) {\n            if ($event.target.composing) {\n              return\n            }\n            _vm.$set(_vm.player, \"name\", $event.target.value)\n          }\n        }\n      }),\n      _vm._v(\" \"),\n      _c(\n        \"button\",\n        { staticClass: \"btn btn-primary btn-lg\", attrs: { type: \"submit\" } },\n        [_vm._v(\"\\n        Let's Play\\n    \")]\n      )\n    ]\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"div\",\n    { attrs: { id: \"player\" } },\n    [\n      !_vm.isRegisteredPlayer ||\n      !(_vm.currentQuestion && !_vm.currentQuestion.ended)\n        ? _c(\"img\", {\n            attrs: { id: \"corner-img\", src: \"/assets/img/question.png\" }\n          })\n        : _vm._e(),\n      _vm._v(\" \"),\n      !_vm.isRegisteredPlayer\n        ? [_c(\"RegisterForm\", { on: { registered: _vm.registered } })]\n        : [\n            _vm.currentQuestion && !_vm.currentQuestion.ended\n              ? _c(\"AnswerInput\", {\n                  attrs: {\n                    questionType: _vm.currentQuestion.type,\n                    active: _vm.currentQuestion.started,\n                    title: _vm.title,\n                    \"existing-choice\": _vm.answer ? _vm.answer.answer : null\n                  },\n                  on: { choice: _vm.answerChosen }\n                })\n              : _c(\"div\", [\n                  _vm._v(\n                    \"\\n            Wait for the host to send you a question...\\n        \"\n                  )\n                ])\n          ]\n    ],\n    2\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/less-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RegisterForm.vue?vue&type=style&index=0&lang=less&\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"1fb40214\", content, false, {});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/less-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RegisterForm.vue?vue&type=style&index=0&lang=less&\", function() {\n     var newContent = require(\"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/less-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RegisterForm.vue?vue&type=style&index=0&lang=less&\");\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/less-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PlayerView.vue?vue&type=style&index=0&lang=less&\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"50618c02\", content, false, {});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/less-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PlayerView.vue?vue&type=style&index=0&lang=less&\", function() {\n     var newContent = require(\"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/less-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PlayerView.vue?vue&type=style&index=0&lang=less&\");\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","const { hydrate } = require('../funcs');\n\nclass Player {\n    constructor(data = {}) {\n        /**\n         * @type {Number}\n         */\n        this.id = null;\n\n        /**\n         * @type {string}\n         */\n        this.name = '';\n\n        /**\n         * @type {Date}\n         */\n        this.joinedAt = new Date();\n\n        /**\n         * @type {Date}\n         */\n        this.rejoinedAt = new Date();\n\n        /**\n         * @type {boolean}\n         */\n        this.active = true;\n\n        /**\n         * @type {?Date}\n         */\n        this.leftAt = null;\n\n        /**\n         * @type {String}\n         */\n        this.websocketId = null;\n\n        /**\n         * @type {number}\n         */\n        this.score = 0;\n\n        hydrate(this, data);\n    }\n}\n\nmodule.exports = Player;\n","import { render, staticRenderFns } from \"./RegisterForm.vue?vue&type=template&id=10e127e4&\"\nimport script from \"./RegisterForm.vue?vue&type=script&lang=js&\"\nexport * from \"./RegisterForm.vue?vue&type=script&lang=js&\"\nimport style0 from \"./RegisterForm.vue?vue&type=style&index=0&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/Users/Anthony/dev/sites/questicals/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('10e127e4')) {\n      api.createRecord('10e127e4', component.options)\n    } else {\n      api.reload('10e127e4', component.options)\n    }\n    module.hot.accept(\"./RegisterForm.vue?vue&type=template&id=10e127e4&\", function () {\n      api.rerender('10e127e4', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"src/frontend/js/components/RegisterForm.vue\"\nexport default component.exports","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--1!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RegisterForm.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--1!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RegisterForm.vue?vue&type=script&lang=js&\"","import mod from \"-!../../../../node_modules/vue-style-loader/index.js!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/less-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RegisterForm.vue?vue&type=style&index=0&lang=less&\"; export default mod; export * from \"-!../../../../node_modules/vue-style-loader/index.js!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/less-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RegisterForm.vue?vue&type=style&index=0&lang=less&\"","export * from \"-!../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RegisterForm.vue?vue&type=template&id=10e127e4&\"","import { render, staticRenderFns } from \"./PlayerView.vue?vue&type=template&id=4a36532e&\"\nimport script from \"./PlayerView.vue?vue&type=script&lang=js&\"\nexport * from \"./PlayerView.vue?vue&type=script&lang=js&\"\nimport style0 from \"./PlayerView.vue?vue&type=style&index=0&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/Users/Anthony/dev/sites/questicals/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('4a36532e')) {\n      api.createRecord('4a36532e', component.options)\n    } else {\n      api.reload('4a36532e', component.options)\n    }\n    module.hot.accept(\"./PlayerView.vue?vue&type=template&id=4a36532e&\", function () {\n      api.rerender('4a36532e', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"src/frontend/js/views/PlayerView.vue\"\nexport default component.exports","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--1!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PlayerView.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--1!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PlayerView.vue?vue&type=script&lang=js&\"","import mod from \"-!../../../../node_modules/vue-style-loader/index.js!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/less-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PlayerView.vue?vue&type=style&index=0&lang=less&\"; export default mod; export * from \"-!../../../../node_modules/vue-style-loader/index.js!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/less-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PlayerView.vue?vue&type=style&index=0&lang=less&\"","export * from \"-!../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PlayerView.vue?vue&type=template&id=4a36532e&\""],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgBA;AACA;AACA;AAAA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AADA;AAGA;AAEA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAIA;AACA;AAEA;AAjBA;AAlBA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACEA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AAFA;AAKA;AAGA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AA7BA;AAgCA;AAAA;AACA;AAAA;AACA;AACA;AAIA;AACA;AAEA;AACA;AACA;AAIA;AACA;AACA;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AAfA;AA5DA;;;;;;;;;;;AC5BA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACNA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;AClDA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACxCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;ACVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACVA;AAAA;AACA;AACA;AACA;AACA;AADA;AACA;AAAA;;;AAGA;AAEA;;;;AAGA;AAEA;;;;AAGA;AAEA;;;;AAGA;AAEA;;;;AAGA;AAEA;;;;AAGA;AAEA;;;;AAGA;AAEA;;;;AAGA;AAEA;AACA;AACA;AAEA;;;;;;;;;;;;AChDA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAiBA;AACA;AACA;;;;;;;;;;;;ACvCA;AAAA;AAAA;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAiBA;AACA;AACA;;;;;;;;;;;;ACvCA;AAAA;AAAA;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;A","sourceRoot":""}